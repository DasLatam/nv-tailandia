<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Interactivo Tailandia 2026</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        :root { --primary: #d35400; --bg: #f4f4f4; }
        body { margin: 0; display: flex; height: 100vh; font-family: 'Segoe UI', sans-serif; overflow: hidden; }
        
        /* Panel Lateral */
        #sidebar { 
            width: 350px; background: white; border-right: 1px solid #ccc; 
            display: flex; flex-direction: column; z-index: 1001; 
        }
        #sidebar-header { padding: 15px; background: var(--primary); color: white; }
        #places-list { flex: 1; overflow-y: auto; padding: 10px; background: var(--bg); }
        .place-card { 
            background: white; margin-bottom: 10px; border-radius: 8px; overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); cursor: pointer; transition: 0.3s;
        }
        .place-card:hover { transform: translateY(-3px); box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .place-card img { width: 100%; height: 120px; object-fit: cover; }
        .place-info { padding: 10px; }
        .place-info h4 { margin: 0 0 5px; color: #2c3e50; font-size: 14px; }
        .place-info small { color: #7f8c8d; font-size: 11px; display: block; margin-bottom: 5px; }

        /* Mapa */
        #map { flex: 1; }

        /* Popups */
        .popup-img { width: 100%; border-radius: 4px; margin-top: 5px; }
        .popup-text { font-size: 13px; line-height: 1.4; }
        
        @media (max-width: 768px) {
            body { flex-direction: column; }
            #sidebar { width: 100%; height: 30%; }
            #map { height: 70%; }
        }
    </style>
</head>
<body>

<div id="sidebar">
    <div id="sidebar-header">
        <h3 style="margin:0"> Lugares Visibles</h3>
        <p style="margin:5px 0 0; font-size: 12px; opacity: 0.8">Zoom o mueve el mapa para filtrar</p>
    </div>
    <div id="places-list"></div>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    const map = L.map('map').setView([13.75, 100.5], 6);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

    // BASE DE DATOS DE PUNTOS
    const puntos = [
        // BANGKOK & ALREDEDORES
        { 
            pos: [13.7345, 100.5601], cat: "Hospedaje", day: "19-24 Feb", name: "Column Bangkok Hotel", time: "Base", 
            price: "Reserva OK", img: "https://images.trvl-media.com/lodging/3000000/2320000/2311800/2311756/74889c16.jpg?impolicy=resizecrop&rw=1200&ra=fit",
            desc: "Tu base en Bangkok.", longDesc: "Hotel en la zona de Asok, ideal para moverte en MRT y BTS.", color: "black"
        },
        { 
            pos: [13.7500, 100.4913], cat: "Templo", day: "19-Feb", time: "08:30", name: "Gran Palacio y Wat Phra Kaew", 
            price: "500 THB", img: "https://dynamic-media.tacdn.com/media/photo-o/2e/c9/78/0f/caption.jpg",
            desc: "Residencia real hist贸rica.", longDesc: "El complejo m谩s sagrado de Tailandia. Alberga el Buda de Esmeralda. Vestimenta estricta.", color: "red"
        },
        { 
            pos: [13.7465, 100.4933], cat: "Templo", day: "19-Feb", time: "11:30", name: "Wat Pho", 
            price: "300 THB", img: "https://images.ctfassets.net/dsbipkqphva2/6XGoWzfCukMVShkTiAjEJ8/6417dd19b503075a2c0846b83a217160/wat-pho-bangkok-guide-lead-min.jpg",
            desc: "Buda Reclinado gigante.", longDesc: "46 metros de largo cubierto en pan de oro. Cuna del masaje tailand茅s.", color: "red"
        },
        { 
            pos: [13.7437, 100.4889], cat: "Templo", day: "19-Feb", time: "14:00", name: "Wat Arun", 
            price: "200 THB", img: "https://static.wixstatic.com/media/2cc94a_07e55de318fe41538e17cb9de596cb45~mv2.jpg/v1/fill/w_1960,h_1088,al_c,q_90,usm_0.66_1.00_0.01,enc_avif,quality_auto/shutterstock_2183013411.jpg",
            desc: "Templo del Amanecer.", longDesc: "Ic贸nica torre de estilo jemer decorada con porcelana.", color: "red" },
        { 
            pos: [13.7412, 100.5082], cat: "Gastronom铆a", day: "19-Feb", time: "19:00", name: "Chinatown (Yaowarat)", 
            price: "Seg煤n consumo", img: "https://d2e5ushqwiltxm.cloudfront.net/wp-content/uploads/sites/62/2020/10/22045552/TH-Hero-Image4-1700x606-1.jpg",
            desc: "Exploraci贸n gastron贸mica.", longDesc: "Vibrante distrito conocido por su incre铆ble comida callejera al anochecer.", color: "orange"
        },
        { 
            pos: [14.3587, 100.5651], cat: "Sitio Hist贸rico", day: "20-Feb", time: "08:00", name: "Parque Historico Ayutthaya", 
            price: "220 THB", img: "https://www.turismotailandes.com/wp-content/uploads/2015/05/Ayutthaya-Tailandia.jpg",
            desc: "Antigua capital de Siam.", longDesc: "Patrimonio de la Humanidad. Mejor explorar en bicicleta o tuk-tuk.", color: "red"
        },
        { 
            pos: [18.7877, 98.9931], cat: "Hospedaje", day: "24-28 Feb", time: "Base", name: "Vieng Thapae Resort", 
            price: "Reserva OK", img: "https://r2imghtl.mmtcdn.com/hcms/image/upload/f_auto,q_auto,t_htl_view/v1/htl-imgs/201704281747192305-648615c0_z.jpg",
            desc: "Tu base en Chiang Mai.", longDesc: "Ubicaci贸n premium cerca de Thapae Gate.", color: "black"
        },
        { 
            pos: [18.7869, 98.9866], cat: "Templo", day: "24-Feb", time: "14:00", name: "Wat Chedi Luang", 
            price: "40 THB", img: "https://images.squarespace-cdn.com/content/v1/5438e2c6e4b0b18459a8ca06/1593080023687-2WNKQ64LB63VEV4UMVZ4/GTJ-2020-0625-39.jpg",
            desc: "Templo antiguo imponente.", longDesc: "Masivo chedi en ruinas que una vez alberg贸 el Buda de Esmeralda.", color: "green"
        },
        { 
            pos: [19.8242, 99.7631], cat: "Templo", day: "27-Feb", time: "09:00", name: "Wat Rong Khun (Templo Blanco)", 
            price: "100 THB", img: "https://www.destinochiangmai-es.com/wp-content/uploads/2022/09/soleil-sur-le-temple-blanc.jpg",
            desc: "Obra de arte moderna blanca.", longDesc: "Contempor谩neo y surrealista. Dise帽ado por Chalermchai Kositpipat.", color: "green"
        },
        { 
            pos: [7.7407, 98.7784], cat: "Naturaleza", day: "02-Mar", time: "07:30", name: "Islas Phi Phi", 
            price: "2500 THB + 400 Parque", img: "https://media-cdn.tripadvisor.com/media/attractions-splice-spp-674x446/06/74/bd/77.jpg",
            desc: "Maya Bay y snorkel.", longDesc: "Archipi茅lago ic贸nico. Se visita en tour de d铆a completo en lancha r谩pida.", color: "blue"
        }
        // ... (Aqu铆 puedes seguir agregando el resto de los puntos con el mismo formato)
    ];

    const markers = [];
    const listContainer = document.getElementById('places-list');

    // Funci贸n para crear marcadores
    puntos.forEach(p => {
        const marker = L.circleMarker(p.pos, {
            radius: 10, fillOpacity: 0.8, color: 'white', weight: 2, fillColor: p.color
        }).addTo(map);

        const popupContent = `
            <div class="popup-text">
                <img src="${p.img}" class="popup-img">
                <b>${p.name}</b><br>
                <i>${p.day} | ${p.time} | ${p.price}</i><br>
                ${p.desc}<br>
                <small>${p.longDesc}</small>
            </div>
        `;
        marker.bindPopup(popupContent);
        marker.pdata = p; // Guardar datos en el marcador
        markers.push(marker);
    });

    // Funci贸n para actualizar el Sidebar
    function updateSidebar() {
        listContainer.innerHTML = '';
        const bounds = map.getBounds();

        markers.forEach(m => {
            if (bounds.contains(m.getLatLng())) {
                const p = m.pdata;
                const card = document.createElement('div');
                card.className = 'place-card';
                card.innerHTML = `
                    <img src="${p.img}">
                    <div class="place-info">
                        <small>${p.day} - ${p.time}</small>
                        <h4>${p.name}</h4>
                        <p style="font-size:11px; margin:5px 0;">${p.desc}</p>
                        <b style="font-size:12px; color:var(--primary)">${p.price}</b>
                    </div>
                `;
                card.onclick = () => {
                    map.setView(m.getLatLng(), 15);
                    m.openPopup();
                };
                listContainer.appendChild(card);
            }
        });
    }

    // Escuchar eventos de movimiento del mapa
    map.on('moveend', updateSidebar);
    updateSidebar(); // Carga inicial
</script>
</body>
</html>