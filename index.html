<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>NVT - Nuestro Viaje a Tailandia</title>
    
    <meta property="og:title" content="NVT - Nuestro Viaje a Tailandia">
    <meta property="og:description" content="Mapa interactivo y gu√≠a de viaje Tailandia 2026">
    <link rel="icon" href="https://fav.farm/‚úàÔ∏è" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        :root { --primary: #d35400; --dark: #2c3e50; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        
        /* HEADER & COUNTER */
        #header { background: var(--primary); color: white; padding: 15px; z-index: 1002; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.3); }
        #header h1 { margin: 0; font-size: 18px; }
        #counter { font-size: 12px; font-weight: bold; background: rgba(0,0,0,0.2); padding: 5px 10px; border-radius: 15px; }

        /* MAPA */
        #map { flex: 1; z-index: 1; }

        /* SIDEBAR / LISTA (Cerrable en m√≥vil) */
        #sidebar { 
            position: absolute; left: 0; bottom: 0; width: 100%; height: 40%; 
            background: white; z-index: 1001; transition: 0.3s;
            display: flex; flex-direction: column; border-top-left-radius: 20px; border-top-right-radius: 20px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.2);
        }
        #sidebar.hidden { transform: translateY(100%); }
        #drag-handle { width: 40px; height: 5px; background: #ccc; border-radius: 5px; margin: 10px auto; cursor: pointer; }
        #places-list { flex: 1; overflow-y: auto; padding: 10px; background: #f8f9fa; }

        /* ESCRITORIO */
        @media (min-width: 769px) {
            body { flex-direction: row; }
            #sidebar { position: relative; width: 380px; height: 100%; border-radius: 0; transform: none !important; }
            #drag-handle { display: none; }
        }

        /* ESTILOS DE CARDS & MARKERS */
        .place-card { background: white; margin-bottom: 10px; border-radius: 10px; display: flex; padding: 10px; gap: 10px; cursor: pointer; border-left: 5px solid var(--primary); box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .place-card img { width: 80px; height: 80px; object-fit: cover; border-radius: 5px; background: #ddd; }
        .place-info h4 { margin: 0; font-size: 14px; }
        .place-info small { color: var(--primary); font-size: 10px; font-weight: bold; }

        .custom-marker { 
            display: flex; justify-content: center; align-items: center; 
            border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 10px rgba(0,0,0,0.5); 
            font-size: 18px; width: 36px; height: 36px; color: white;
        }

        #toggle-btn { position: absolute; bottom: 20px; right: 20px; z-index: 1002; background: var(--primary); color: white; border: none; padding: 15px; border-radius: 50%; box-shadow: 0 5px 15px rgba(0,0,0,0.3); cursor: pointer; font-size: 20px; }
    </style>
</head>
<body>

<div id="header">
    <h1>üáπüá≠ NVT</h1>
    <span id="counter">Cargando...</span>
</div>

<div id="sidebar">
    <div id="drag-handle" onclick="toggleSidebar()"></div>
    <div id="places-list"></div>
</div>

<button id="toggle-btn" onclick="toggleSidebar()">üìç</button>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    const map = L.map('map', { zoomControl: false }).setView([13.75, 100.5], 6);
    
    // CAPAS H√çBRIDAS (Sat√©lite + Calles)
    L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}').addTo(map);
    L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/toner-hybrid/{z}/{x}/{y}{r}.png', { opacity: 0.6 }).addTo(map);

    const catConfig = {
        "Hospedaje": { icon: "üè®", color: "#000000" },
        "Templo": { icon: "‚õ©Ô∏è", color: "#c0392b" },
        "Gastronom√≠a": { icon: "üçú", color: "#d35400" },
        "Vida Nocturna": { icon: "üç∏", color: "#8e44ad" },
        "Experiencia": { icon: "üéüÔ∏è", color: "#e67e22" },
        "Naturaleza": { icon: "üèùÔ∏è", color: "#27ae60" },
        "Tecnolog√≠a": { icon: "üì±", color: "#2980b9" },
        "Compras": { icon: "üõçÔ∏è", color: "#f1c40f" },
        "Sitio Hist√≥rico": { icon: "üóø", color: "#7f8c8d" }
    };

    // BASE DE DATOS DE 57 PUNTOS
    const puntos = [
        { pos: [13.7345, 100.5601], cat: "Hospedaje", day: "19-Feb", name: "Column Bangkok Hotel", desc: "Base Bangkok.", img: "https://images.trvl-media.com/lodging/3000000/2320000/2311800/2311756/74889c16.jpg" },
        { pos: [13.7500, 100.4913], cat: "Templo", day: "19-Feb", name: "Gran Palacio", desc: "Buda Esmeralda.", img: "https://dynamic-media.tacdn.com/media/photo-o/2e/c9/78/0f/caption.jpg" },
        { pos: [13.7465, 100.4933], cat: "Templo", day: "19-Feb", name: "Wat Pho", desc: "Buda Reclinado.", img: "https://images.ctfassets.net/dsbipkqphva2/6XGoWzfCukMVShkTiAjEJ8/6417dd19b503075a2c0846b83a217160/wat-pho-bangkok-guide-lead-min.jpg" },
        { pos: [13.7437, 100.4889], cat: "Templo", day: "19-Feb", name: "Wat Arun", desc: "Templo Amanecer.", img: "https://static.wixstatic.com/media/2cc94a_07e55de318fe41538e17cb9de596cb45~mv2.jpg" },
        { pos: [13.7527, 100.5048], cat: "Gastronom√≠a", day: "19-Feb", name: "Thipsamai Pad Thai", desc: "Pad Thai famoso.", img: "" },
        { pos: [13.7377, 100.5137], cat: "Templo", day: "19-Feb", name: "Wat Traimit", desc: "Buda de Oro.", img: "" },
        { pos: [13.7412, 100.5082], cat: "Gastronom√≠a", day: "19-Feb", name: "Chinatown Yaowarat", desc: "Comida callejera.", img: "https://d2e5ushqwiltxm.cloudfront.net/wp-content/uploads/sites/62/2020/10/22045552/TH-Hero-Image4-1700x606-1.jpg" },
        { pos: [14.3587, 100.5651], cat: "Sitio Hist√≥rico", day: "20-Feb", name: "Ayutthaya", desc: "Ruinas Siam.", img: "https://www.turismotailandes.com/wp-content/uploads/2015/05/Ayutthaya-Tailandia.jpg" },
        { pos: [13.7588, 100.4974], cat: "Vida Nocturna", day: "20-Feb", name: "Khao San Road", desc: "Mochileros.", img: "https://static.independent.co.uk/s3fs-public/thumbnails/image/2019/04/11/17/istock-1024107154.jpg" },
        { pos: [13.7999, 100.5505], cat: "Compras", day: "21-Feb", name: "Mercado Chatuchak", desc: "Fin de semana.", img: "https://tripaim.com/blog/wp-content/uploads/2021/04/Mercados-de-Bangkok.jpg" },
        { pos: [13.4259, 99.9550], cat: "Compras", day: "21-Feb", name: "Mercado Amphawa", desc: "Luci√©rnagas.", img: "https://media-cdn.tripadvisor.com/media/attractions-splice-spp-720x480/07/a0/88/b0.jpg" },
        { pos: [13.4497, 99.9600], cat: "Compras", day: "21-Feb", name: "Damnoen Saduak", desc: "Mercado flotante.", img: "https://dynamic-media.tacdn.com/media/photo-o/2e/c9/a4/68/caption.jpg" },
        { pos: [13.5073, 99.9990], cat: "Compras", day: "21-Feb", name: "Mercado Maeklong", desc: "Tren sobre v√≠as.", img: "https://tuguiaentailandia.com/wp-content/uploads/2021/10/El-famoso-mercado-del-Tren-de-Tailandfia.jpeg" },
        { pos: [13.7126, 100.5362], cat: "Experiencia", day: "22-Feb", name: "House of Taste", desc: "Cocina Tai.", img: "https://www.houseoftastecooking.com/wp-content/uploads/2025/07/House-of-Taste-Thai-Cooking-School-Team-Building-scaled.jpg" },
        { pos: [13.7266, 100.5110], cat: "Compras", day: "22-Feb", name: "IconSiam", desc: "Lujo.", img: "" },
        { pos: [13.7313, 100.5417], cat: "Naturaleza", day: "22-Feb", name: "Parque Lumpini", desc: "Lagartos.", img: "" },
        { pos: [13.7226, 100.5819], cat: "Vida Nocturna", day: "22-Feb", name: "Tichuca Rooftop", desc: "Luces LED.", img: "https://www.therooftopguide.com/rooftop-bars-in-bangkok/Bilder/ticucha-rooftop-bar-600-1.jpg" },
        { pos: [13.7479, 100.5385], cat: "Vida Nocturna", day: "22-Feb", name: "Red Sky Bar", desc: "Vistas 360.", img: "https://static.bangkokpost.com/media/content/20140522/631127.jpg" },
        { pos: [13.7348, 100.2155], cat: "Templo", day: "23-Feb", name: "Wat Samphran", desc: "Drag√≥n Rosa.", img: "" },
        { pos: [14.5936, 100.3793], cat: "Templo", day: "23-Feb", name: "Wat Muang", desc: "Buda Gigante.", img: "" },
        { pos: [18.7877, 98.9931], cat: "Hospedaje", day: "24-Feb", name: "Vieng Thapae Resort", desc: "Base Chiang Mai.", img: "" },
        { pos: [18.7869, 98.9866], cat: "Templo", day: "24-Feb", name: "Wat Chedi Luang", desc: "Pir√°mide.", img: "https://images.squarespace-cdn.com/content/v1/5438e2c6e4b0b18459a8ca06/1593080023687-2WNKQ64LB63VEV4UMVZ4/GTJ-2020-0625-39.jpg" },
        { pos: [18.7885, 98.9824], cat: "Templo", day: "24-Feb", name: "Wat Phra Singh", desc: "Templo oro.", img: "" },
        { pos: [18.7958, 98.9826], cat: "Templo", day: "24-Feb", name: "Wat Lok Moli", desc: "Ladrillo oscuro.", img: "" },
        { pos: [18.8122, 98.9213], cat: "Templo", day: "24-Feb", name: "Wat Doi Suthep", desc: "Vistas monta√±a.", img: "https://img1.oastatic.com/img2/77143442/834x417r/variant.jpg" },
        { pos: [18.5910, 98.4870], cat: "Naturaleza", day: "25-Feb", name: "Doi Inthanon", desc: "Cima Tai.", img: "" },
        { pos: [18.5527, 98.4801], cat: "Templo", day: "25-Feb", name: "Pagodas Reales", desc: "Jardines.", img: "" },
        { pos: [20.1997, 99.8166], cat: "Naturaleza", day: "25-Feb", name: "T√© Chui Fong", desc: "Plantaciones.", img: "" },
        { pos: [19.1666, 98.8333], cat: "Experiencia", day: "26-Feb", name: "Elefantes √âtico", desc: "D√≠a completo.", img: "https://media.tacdn.com/media/attractions-splice-spp-674x446/06/ef/16/64.jpg" },
        { pos: [18.7852, 99.0003], cat: "Gastronom√≠a", day: "26-Feb", name: "Night Bazaar CM", desc: "Compras.", img: "" },
        { pos: [18.7915, 98.9912], cat: "Vida Nocturna", day: "26-Feb", name: "Zoe in Yellow", desc: "Fiesta.", img: "" },
        { pos: [19.8242, 99.7631], cat: "Templo", day: "27-Feb", name: "Templo Blanco", desc: "Chiang Rai.", img: "https://www.destinochiangmai-es.com/wp-content/uploads/2022/09/soleil-sur-le-temple-blanc.jpg" },
        { pos: [19.9231, 99.8407], cat: "Templo", day: "27-Feb", name: "Templo Azul", desc: "Vibrante.", img: "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/16/8f/c1/32/innenbereich.jpg" },
        { pos: [19.9920, 99.8604], cat: "Sitio Hist√≥rico", day: "27-Feb", name: "Casa Negra", desc: "Baandam.", img: "https://www.destinochiangmai-es.com/wp-content/uploads/2024/04/museo-baan-dam.jpg" },
        { pos: [18.9103, 98.9324], cat: "Naturaleza", day: "28-Feb", name: "Granja Orqu√≠deas", desc: "Ex√≥tico.", img: "" },
        { pos: [7.8839, 98.3905], cat: "Sitio Hist√≥rico", day: "28-Feb", name: "Phuket Old Town", desc: "Colores.", img: "https://cdn-ilaahih.nitrocdn.com/eNIJKrVrLmGQXTjIClKuJlbXtyfBFxHI/assets/images/optimized/rev-0a32d0b/www.theprivateworld.com/wp-content/uploads/2022/09/Phuket-Old-Town-Featured-Image.jpg" },
        { pos: [7.9620, 98.2833], cat: "Experiencia", day: "28-Feb", name: "Carnival Magic", desc: "Show luces.", img: "" },
        { pos: [8.1250, 98.5000], cat: "Naturaleza", day: "01-Mar", name: "Ao Phang Nga", desc: "James Bond.", img: "https://www.thainationalparks.com/img/poi/2021/05/23/397472/james-bond-island-w-900.jpg" },
        { pos: [8.0175, 98.8404], cat: "Naturaleza", day: "01-Mar", name: "4 Islas Krabi", desc: "Poda/Tup.", img: "" },
        { pos: [7.7407, 98.7784], cat: "Naturaleza", day: "02-Mar", name: "Islas Phi Phi", desc: "Maya Bay.", img: "https://media-cdn.tripadvisor.com/media/attractions-splice-spp-674x446/06/74/bd/77.jpg" },
        { pos: [9.5707, 100.0604], cat: "Templo", day: "03-Mar", name: "Big Buddha Samui", desc: "Dorado.", img: "https://www.placesofjuma.com/wp-content/uploads/2023/10/Big-Buddha-Koh-Samui-3-scaled-761x507.jpg" },
        { pos: [9.5714, 100.0669], cat: "Templo", day: "03-Mar", name: "Wat Plai Laem", desc: "18 brazos.", img: "https://cdn.sanity.io/images/nxpteyfv/goguides/3589791410dd2104bc6a9a61606797d3e49bcf2c-1600x1066.jpg" },
        { pos: [8.0269, 98.8286], cat: "Naturaleza", day: "04-Mar", name: "Monkey Trail", desc: "Monos.", img: "" },
        { pos: [8.0063, 98.8378], cat: "Naturaleza", day: "04-Mar", name: "Railay Beach", desc: "Para√≠so.", img: "https://101lugaresincreibles.com/wp-content/uploads/2016/03/Railay-beach-tailandia-e1457107979409.jpg" },
        { pos: [8.0105, 98.8415], cat: "Experiencia", day: "04-Mar", name: "Railay Viewpoint", desc: "Vistas.", img: "https://www.journeyera.com/wp-content/uploads/2016/10/AO-NANG-TO-RAILAY-BEACH-KRABI-1199.jpg" },
        { pos: [8.1226, 99.2789], cat: "Naturaleza", day: "04-Mar", name: "Emerald Pool", desc: "Natural.", img: "" },
        { pos: [8.1274, 98.9252], cat: "Templo", day: "04-Mar", name: "Tiger Cave", desc: "Cima.", img: "" },
        { pos: [14.0680, 99.3000], cat: "Naturaleza", day: "Ext", name: "Erawan Falls", desc: "7 niveles.", img: "https://viajeatailandia.com/wp-content/uploads/2014/08/Kanchananaburi-Cataratas-de-Erawan.jpg" },
        { pos: [14.0200, 99.5300], cat: "Experiencia", day: "Ext", name: "Kanchanaburi Skywalk", desc: "Cristal.", img: "https://kanchanaburicarrental.com/wp-content/uploads/2024/11/Skywalk-Kanchanaburi-3.jpg" },
        { pos: [10.0956, 99.8404], cat: "Naturaleza", day: "05-Mar", name: "Koh Tao", desc: "Snorkel.", img: "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/03/67/74/b7/koh-nang-yuan.jpg" },
        { pos: [9.6192, 99.6738], cat: "Naturaleza", day: "06-Mar", name: "Ang Thong", desc: "42 islas.", img: "https://fotografias.lasexta.com/clipping/cmsimages02/2021/09/22/09B064EF-11ED-4278-A758-3F5A1D05D877/97.jpg" },
        { pos: [9.4755, 100.0658], cat: "Naturaleza", day: "07-Mar", name: "Crystal Bay", desc: "Relajante.", img: "" },
        { pos: [17.0180, 99.7040], cat: "Sitio Hist√≥rico", day: "Ext", name: "Sukhothai", desc: "Capital 1.", img: "https://www.voyagetips.com/wp-content/uploads/2019/04/parc-historique-de-Sukhothai.jpg" },
        { pos: [13.7462, 100.5291], cat: "Tecnolog√≠a", day: "08-Mar", name: "MBK Center", desc: "Tech.", img: "" },
        { pos: [13.7475, 100.5391], cat: "Tecnolog√≠a", day: "09-Mar", name: "Apple Store", desc: "iPhones.", img: "" },
        { pos: [13.7483, 100.5404], cat: "Compras", day: "09-Mar", name: "Big C Supercenter", desc: "Snacks.", img: "" },
        { pos: [13.7444, 100.5399], cat: "Compras", day: "09-Mar", name: "CentralWorld", desc: "Shopping.", img: "" }
    ];

    const markers = [];
    const listContainer = document.getElementById('places-list');
    const counterLabel = document.getElementById('counter');
    const sidebar = document.getElementById('sidebar');

    function toggleSidebar() { sidebar.classList.toggle('hidden'); }

    puntos.forEach(p => {
        const config = catConfig[p.cat] || { icon: "üìç", color: "#333" };
        const iconHtml = `<div class="custom-marker" style="background-color: ${config.color}">${config.icon}</div>`;
        const marker = L.marker(p.pos, { icon: L.divIcon({ className: '', html: iconHtml, iconSize: [36, 36], iconAnchor: [18, 18], popupAnchor: [0, -20] }) }).addTo(map);
        
        marker.bindPopup(`
            <div style="width:200px">
                ${p.img ? `<img src="${p.img}" style="width:100%; height:120px; object-fit:cover; border-radius:10px 10px 0 0;">` : ''}
                <div style="padding:10px">
                    <b style="color:${config.color}">${p.name}</b><br>
                    <small>${p.day} | ${p.cat}</small>
                </div>
            </div>
        `);
        marker.pdata = { ...p, icon: config.icon, color: config.color };
        markers.push(marker);
    });

    function updateSidebar() {
        listContainer.innerHTML = '';
        const bounds = map.getBounds();
        let count = 0;
        markers.forEach(m => {
            if (bounds.contains(m.getLatLng())) {
                count++;
                const p = m.pdata;
                const card = document.createElement('div');
                card.className = 'place-card';
                card.style.borderLeftColor = p.color;
                card.innerHTML = `
                    ${p.img ? `<img src="${p.img}">` : '<div style="width:80px; background:#eee"></div>'}
                    <div class="place-info">
                        <small style="color:${p.color}">${p.day} | ${p.cat}</small>
                        <h4>${p.icon} ${p.name}</h4>
                    </div>
                `;
                card.onclick = () => { 
                    map.setView(m.getLatLng(), 15); 
                    m.openPopup();
                    if(window.innerWidth < 769) toggleSidebar(); 
                };
                listContainer.appendChild(card);
            }
        });
        counterLabel.innerText = `Mostrando ${count} de 57 puntos`;
    }

    map.on('moveend', updateSidebar);
    updateSidebar();
</script>
</body>
</html>